<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>被保人列表</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<!--标准mui.css-->
		<link rel="stylesheet" href="../css/mui.min.css">
		<!--App自定义的css-->
	</head>
	<style type="text/css">
		.mui-bar .mui-btn-block {
			padding: 13px 0;
		}
	</style>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">被保人列表</h1>
			<a class="mui-icon mui-icon-right-nav mui-pull-right mui-icon-plus-filled" href="Newinsured.html"></a>
		</header>
		<nav class="mui-bar mui-bar-tab">
			<button type="button" class="mui-btn mui-btn-primary mui-btn-block" id="yes">确定</button>
		</nav>
		<div class="mui-content">
			<ul id="OA_task_1" class="mui-table-view">
				<li class="mui-table-view-cell" type_id="1">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red delete">删除</a>
						<a class="mui-btn mui-btn-yellow mui-icon mui-icon-compose edit"></a>
					</div>
					<div class="mui-slider-handle">
						<div class="mui-input-row mui-checkbox mui-left">
							<label>父亲</label>
							<input name="checkbox" value="Item 1" type="checkbox">
						</div>
					</div>
				</li>
				<li class="mui-table-view-cell" type_id="2">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red delete">删除</a>
						<a class="mui-btn mui-btn-yellow mui-icon mui-icon-compose edit"></a>
					</div>
					<div class="mui-slider-handle">
						<div class="mui-input-row mui-checkbox mui-left">
							<label>父亲</label>
							<input name="checkbox" value="Item 1" type="checkbox">
						</div>
					</div>
				</li>
				<li class="mui-table-view-cell" type_id="3">
					<div class="mui-slider-right mui-disabled">
						<a class="mui-btn mui-btn-red delete">删除</a>
						<a class="mui-btn mui-btn-yellow mui-icon mui-icon-compose edit"></a>
					</div>
					<div class="mui-slider-handle">
						<div class="mui-input-row mui-checkbox mui-left">
							<label>父亲</label>
							<input name="checkbox" value="Item 1" type="checkbox">
						</div>
					</div>
				</li>
			</ul>
		</div>
		<script src="../js/mui.min.js"></script>
		<script>
			mui.init();
			(function($) {
				//第一个demo，拖拽后显示操作图标，点击操作图标删除元素；
				var btnArray = ['确认', '取消'];
				$('#OA_task_1').on('tap', '.delete', function(event) {
					var elem = this;
					var li = elem.parentNode.parentNode;
					mui.confirm('确认删除当前被保人？', '警告！', btnArray, function(e) {
						if(e.index == 0) {
							li.parentNode.removeChild(li);
						} else {
							setTimeout(function() {
								$.swipeoutClose(li);
							}, 0);
						}
					});
				});
				
				$('#OA_task_1').on('tap', '.edit', function(event) {
					var elem = this;
					var li = elem.parentNode.parentNode;
					var li_ids = li.getAttribute('type_id');
					var options = {
						styles: {
							popGesture: "close"
						},
						extras: {
							nums: li_ids
						}
					};
					
					mui.confirm('确认编辑该条记录？', '温馨提示', btnArray, function(e) {
						if(e.index == 0) {
							//li.parentNode.removeChild(li);
							mui.openWindow('Newinsured.html','Newinsured.html',options)
						} else {
							setTimeout(function() {
								$.swipeoutClose(li);
							}, 0);
						}
					});
				});
				

				if(window.plus) {
					plusReady();
				} else {
					document.addEventListener("plusready", plusReady, false);
				}

				function plusReady() {
					mui("body").on("tap", "#yes", function() {
						var view = plus.webview.getWebviewById("radio.html");
						mui.fire(view, 'doit', {
							inputVal: '我回来了'
						});
						mui.back()
					})
				}

				mui('header').on('tap', 'a.mui-icon-plus-filled', function() {
					var href = this.getAttribute('href');

					//非plus环境，直接走href跳转
					if(!mui.os.plus) {
						location.href = href;
						return;
					}

					var id = this.getAttribute("data-wid");
					if(!id) {
						id = href;
						console.log('此时的ID是' + id)
					}

					if(href && ~href.indexOf('.html')) {
						//打开窗口的相关参数
						var options = {
							styles: {
								popGesture: "close"
							},
							extras: {}
						};
						//如下场景不适用下拉回弹：
						//1、单webview下拉刷新；2、底部有fixed定位的div的页面
						if(!~id.indexOf('pullrefresh.html') && !~href.indexOf("examples/tabbar.html") && !~href.indexOf("list-to-detail/listview.html")) {
							options.styles.bounce = "vertical";
						}
						//图标页面需要启动硬件加速
						if(~id.indexOf('icons.html') || ~id.indexOf("echarts.html")) {
							options.styles.hardwareAccelerated = true;
						}
						if(~id.indexOf('im-chat.html')) {
							options.extras.acceleration = "none";
						}

						var titleType = this.getAttribute("data-title-type");
						if(titleType && titleType.indexOf("native") > -1) { //原生导航
							options.styles.titleNView = {
								autoBackButton: true,
								backgroundColor: '#f7f7f7',
								titleText: this.innerHTML.trim(),
								splitLine: {
									color: '#cccccc'
								}
							};

							options.show = {
								event: 'loaded'
							}
							//有原生标题的情况下，就不需要waiting框了
							options.waiting = {
								autoShow: false
							}

							//透明渐变导航,增加类型设置
							if(titleType == "transparent_native") {
								options.styles.titleNView.type = "transparent";
							}

							//处理原生图片轮播
							if(~id.indexOf("slider-native.html")) {
								options.styles.subNViews = [{ //配置图片轮播
									id: 'slider-native',
									type: 'ImageSlider',
									styles: {
										left: 0,
										right: 0,
										top: 0,
										height: '200px',
										position: 'static',
										loop: true,
										images: [{
											src: '_www/images/yuantiao.jpg',
											width: '100%'
										}, {
											src: '_www/images/shuijiao.jpg',
											width: '100%',
										}, {
											src: '_www/images/muwu.jpg',
											width: '100%',
										}, {
											src: '_www/images/cbd.jpg',
											width: '100%',
										}]
									}
								}];
							}
						} else {
							//非原生导航，需要设置顶部状态栏占位
							options.styles.statusbar = {
								background: "#f7f7f7"
							}
						}
						if(id && id == "viewgroup") { //强制启用截屏
							options.extras.acceleration = "capture";
						}
						//打开新窗口
						mui.openWindow(href, id, options);

					}
				})

				function fun1(e) {
					//获取当前webview的名称
					var views = plus.webview.currentWebview()
					views.reload(true);
				}
				//自定义窗体事件  doit 要和b页面定义的 事件名称一致   
				window.addEventListener('reLoad', fun1);

			})(mui);
		</script>
	</body>

</html>