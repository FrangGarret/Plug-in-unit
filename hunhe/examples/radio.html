<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>投保</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<!--标准mui.css-->
		<link rel="stylesheet" href="../css/mui.min.css">
		<!--App自定义的css-->
		<style type="text/css">
			.mui-checkbox.mui-left input[type=checkbox] {
				top: 50%;
				transform: translateY(-50%);
			}
			
			.pay_money {
				width: 90%;
				line-height: 48px;
				height: 48px;
				margin-left: 5%;
				padding: 0;
				border: 1px solid #ffb84e;
				color: #ffb84e;
				border-radius: 50px;
			}
			
			nav.mui-bar {
				box-shadow: none;
				background: transparent;
			}
			
			.mui-table-view .mui-media-object {
				line-height: 80px;
				max-width: 80px;
				height: 80px;
			}
			
			.mui-popover .mui-table-view .mui-table-view-cell:last-child,
			.mui-popover .mui-table-view .mui-table-view-cell:first-child,
			.mui-popover.mui-popover-action .mui-table-view {
				border-radius: 0px;
			}
			
			.mui-content>.mui-table-view:first-child {
				margin-top: 0;
			}
			
			.checkbox_label {
				display: inline-block;
				padding: 10px 8px 10px 55px;
			}
			
			.pay_money:enabled:active {
				color: #fff;
				background-color: #fdab31;
			}
			
			#picture {
				background: #fff;
			}
			
			.mui-popover.mui-popover-action .mui-table-view {
				text-align: left;
			}
			
			#picture .mui-popover .mui-table-view .mui-table-view-cell:first-child>a:not(.mui-btn) {
				border-radius: none;
			}
			
			#picture .mui-navigate-right {
				color: #929292;
			}
			
			#picture .mui-pull-right {
				margin-right: 20px;
				color: #333333;
			}
			
			.goPayment {
				width: 100%;
				text-align: center;
				padding: 12px 0;
				font-size: 16px;
			}
			
			.paymentTitle {
				text-align: center;
				font-size: 16px;
				height: 30px;
				line-height: 30px;
			}
			
			.payment_closed {
				font-size: 30px;
				margin-left: 15px;
			}
		</style>
	</head>

	<body>

		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">投保</h1>
		</header>

		<nav class="mui-bar mui-bar-tab">
			<button class="pay_money links" id="pay_money">立即支付</button>
		</nav>

		<div class="mui-content">
			<ul class="mui-table-view">
				<li class="mui-table-view-cell mui-media">
					<img class="mui-media-object mui-pull-left" src="../images/shuijiao.jpg">
					<div class="mui-media-body">
						成长无忧少儿综合意外险
						<p class="mui-ellipsis">承包公司<span class="">众安保险</span></p>
						<p class="mui-ellipsis">保障期限<span class="">1年</span></p>
					</div>
				</li>
				<li class="mui-table-view-cell mui-media">
					<p class="">
						生效日期
						<span class="mui-pull-right">
							2018-01-08
						</span>
					</p>
				</li>
				<li class="mui-table-view-cell mui-media">

					<p class="mui-navigate-right">

						<span class="previousElementSibling">选择被保人</span>
						<button type="button" class="mui-pull-right mui-btn showUserPicker links" id="showUserPicker1" href="tableviews-with-swipe.html">111
						</button>
					</p>
				</li>
				<li class="mui-table-view-cell mui-media">

					<p class="mui-navigate-right">
						<span class="previousElementSibling">选择额度</span>
						<button type="button" class="mui-pull-right mui-btn showUserPicker" id="showUserPicker2">111
						</button>
					</p>
				</li>
				<li class="mui-table-view-cell mui-media">
					<p class="">
						<span class="previousElementSibling">选择额度</span>
						<span class="mui-pull-right">
							1年
						</span>
					</p>
				</li>
				<li class="mui-table-view-cell mui-media">
					<p class="">
						保险价格
						<span class="mui-pull-right">
							￥33.00
						</span>
					</p>
				</li>

			</ul>
			<p class="mui-input-row mui-checkbox mui-left files">
				<span class="checkbox_label">我已经认真阅读<a href="clause.html" class="links">《保险条款》</a><a class="links" href="Notice.html">《投保须知》</a>了解并接受，包括有关责任条款
				及免除责任条款，承保限制等约定
				</span>
				<input name="checkbox" type="checkbox" checked="checked" id="agree">
			</p>
		</div>
		<div id="picture" class="mui-popover mui-popover-action mui-popover-bottom" style="display: none;">
			<div class="">
				<p class="paymentTitle">
					<a href="#picture" class="mui-icon mui-icon-closeempty mui-pull-left payment_closed"></a>
					确认付款
					<a href="demobankcard.html" class="mui-pull-right links">帮助</a>
				</p>
				<ul class="mui-table-view">
					<li class="mui-table-view-cell">
						<a class="mui-navigate-right">
							订单信息
							<span class="mui-pull-right">成长无忧少儿综合意外险</span>
						</a>
					</li>
					<li class="mui-table-view-cell">
						<a class="mui-navigate-right links" href="PaymentMethod.html">
							付款方式
							<span class="mui-pull-right PaymentMethod" id="PaymentMethod">无可用付款方式</span>
						</a>
					</li>
					<li class="mui-table-view-cell">
						<a class="mui-navigate-right links" href="Coupon.html">
							优惠与代金券
							<span class="mui-pull-right Coupon" id="Coupon">无可用优惠</span>
						</a>
					</li>
				</ul>
			</div>
			<ul class="mui-table-view">
				<li class="mui-table-view-cell">
					<!--<a href="#picture" class="">去支付<b>999.02</b>元</a>-->
					<button href="InsuranceRsult.html" class="mui-btn-success goPayment links">去支付<b>999.02</b>元</button>
				</li>
			</ul>
		</div>

	</body>
	<script src="../js/mui.min.js"></script>
	<script src="../js/commonlinks.js" type="text/javascript" charset="utf-8"></script>
	<script>
		mui.init({
			swipeBack: true //启用右滑关闭功能
		});

		if(mui.os.plus) { //判断是否是app端
			mui.plusReady(function() {
				//判断在plus5+环境下还是浏览器环境下，取值方式不同
				if(mui.os.ios || (mui.os.android)) {
					var self = plus.webview.currentWebview();
					var name = self.name;
				} else {
					console.log(localStorage.getItem('a'))
				}
				//选择被保人页面返回回来要执行的方法   
				function fun1(e) {
					var val = e.detail.inputVal
					document.getElementById('showUserPicker1').innerText = val;
				}
				//自定义窗体事件  doit 要和b页面定义的 事件名称一致   
				window.addEventListener('doit', fun1);

				//mui('#InsurersList').popover('show');

				//选择付款方式页面返回回来要执行的方法
				function fun2(e) {
					var val = e.detail.inputVal
					document.getElementById('PaymentMethod').innerText = val
				}
				window.addEventListener('PayMent', fun2);

				//选择优惠券页面返回回来要执行的方法
				function fun3(e) {
					var val = e.detail.inputVal
					document.getElementById('Coupon').innerText = val
				}
				window.addEventListener('Coupon', fun3);
			})
		} else { //浏览器端

		}

		mui('body').on('tap', '.mui-popover-action li>a', function() {
			var a = this,
				parent;
			//根据点击按钮，反推当前是哪个actionsheet
			for(parent = a.parentNode; parent != document.body; parent = parent.parentNode) {
				if(parent.classList.contains('mui-popover-action')) {
					break;
				}
			}
			//关闭actionsheet
			//mui('#' + parent.id).popover('toggle');
		})

		mui('.mui-bar').on('tap', '#pay_money', function() {
			var check = true; //设置全局变量判断必选条件是否全部填写和选中
			var agreeId = document.getElementById('agree').checked
			//判断输入框的选项是否已经填写值
			mui(".mui-navigate-right button").each(function() {
				//若当前input为空，则alert提醒
				if(!this.innerText || this.innerText == "") {
					var label = this.previousElementSibling;
					mui.alert(label.innerText + "不允许为空");
					check = false;
					return false;
				}
			});
			//判断相关条款是否已经同意
			if(agreeId == false) {
				mui.alert('请同意相关条款');
				check = false;
				return false
			}

			if(check) {
				mui('#picture').popover('show');
				check = null;
			}

		})

		mui('.mui-navigate-right,.files,#picture').on('tap', '.links', function() {
			var beibaorenChecked = document.getElementById('showUserPicker1').innerText;
			if(beibaorenChecked && beibaorenChecked.trim() != '') {
				//打开窗口的相关参数
				var options = {
					styles: {
						popGesture: "close"
					},
					extras: {
						beibaorenChecked: beibaorenChecked
					}
				};
			} else {
				var options = {
					styles: {
						popGesture: "close"
					},
					extras: {}
				};
			}
			commonLinks(this,options)
		})
	</script>

</html>