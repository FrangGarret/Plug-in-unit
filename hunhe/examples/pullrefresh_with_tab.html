<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<link rel="stylesheet" href="../css/mui.min.css">
		<link rel="stylesheet" type="text/css" href="../css/iconfont.css" />
		<style>
			html,
			body {
				background-color: #efeff4;
			}
			
			.mui-bar~.mui-content .mui-fullscreen {
				top: 44px;
				height: auto;
			}
			
			.mui-pull-top-tips {
				position: absolute;
				top: -20px;
				left: 50%;
				margin-left: -25px;
				width: 40px;
				height: 40px;
				border-radius: 100%;
				z-index: 1;
			}
			
			.mui-bar~.mui-pull-top-tips {
				top: 24px;
			}
			
			.mui-pull-top-wrapper {
				width: 42px;
				height: 42px;
				display: block;
				text-align: center;
				background-color: #efeff4;
				border: 1px solid #ddd;
				border-radius: 25px;
				background-clip: padding-box;
				box-shadow: 0 4px 10px #bbb;
				overflow: hidden;
			}
			
			.mui-pull-top-tips.mui-transitioning {
				-webkit-transition-duration: 200ms;
				transition-duration: 200ms;
			}
			
			.mui-pull-top-tips .mui-pull-loading {
				/*-webkit-backface-visibility: hidden;
				-webkit-transition-duration: 400ms;
				transition-duration: 400ms;*/
				margin: 0;
			}
			
			.mui-pull-top-wrapper .mui-icon,
			.mui-pull-top-wrapper .mui-spinner {
				margin-top: 7px;
			}
			
			.mui-pull-top-wrapper .mui-icon.mui-reverse {
				/*-webkit-transform: rotate(180deg) translateZ(0);*/
			}
			
			.mui-pull-bottom-tips {
				text-align: center;
				background-color: #efeff4;
				font-size: 15px;
				line-height: 40px;
				color: #777;
			}
			
			.mui-pull-top-canvas {
				overflow: hidden;
				background-color: #fafafa;
				border-radius: 40px;
				box-shadow: 0 4px 10px #bbb;
				width: 40px;
				height: 40px;
				margin: 0 auto;
			}
			
			.mui-pull-top-canvas canvas {
				width: 40px;
			}
			
			.mui-slider-indicator.mui-segmented-control {
				background-color: #efeff4;
			}
			
			.product_img {
				line-height: 66px;
				max-width: 66px;
				height: 66px;
			}
			
			.mui-bar-tab {
				display: flex;
				flex-flow: row;
			}
			
			.nav_bar {
				flex: 1;
				display: flex;
				flex-flow: column;
			}
			
			.nav_bar.current {
				color: #ffc107;
			}
			
			.mui-bar-tab .nav_bar span {
				text-align: center;
				flex: 1;
				line-height: 25px;
				font-size: 14px;
			}
			
			.mui-bar-tab .nav_bar span.mui-icon {
				font-size: 20px;
				position: relative;
				top: 4px;
				padding-top: 0;
				padding-bottom: 0;
			}
			
			.mui-bar-tab .nav_bar span.mui-icon-extra-topic {
				font-size: 16px;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">产品列表</h1>
		</header>

		<nav class="mui-bar mui-bar-tab">
			<span class="nav_bar links" href="index.html">
				<span class="mui-icon mui-icon-home"></span>
			<span class="mui-tab-label">首页</span>
			</span>
			<span class="nav_bar links current" href="pullrefresh_with_tab.html">
				<span class="mui-icon iconfont icon-anquan"></span>
			<span class="mui-tab-label">产品</span>
			</span>
			<span class="nav_bar links" href="setting.html">
				<span class="mui-icon  mui-icon-contact"></span>
			<span class="mui-tab-label">我的</span>
			</span>
		</nav>

		<div class="mui-content">
			<div id="slider" class="mui-slider mui-fullscreen">
				<div id="sliderSegmentedControl" class="mui-scroll-wrapper mui-slider-indicator mui-segmented-control mui-segmented-control-inverted">
					<div class="mui-scroll">
						<a class="mui-control-item mui-active" href="#item1mobile">
							全部
						</a>
						<a class="mui-control-item" href="#item2mobile">
							健康
						</a>
						<a class="mui-control-item" href="#item3mobile">
							财产
						</a>
						<a class="mui-control-item" href="#item4mobile">
							意外
						</a>
						<a class="mui-control-item" href="#item5mobile">
							商户
						</a>
						<a class="mui-control-item" href="#item6mobile" id="item6">
							趣味
						</a>
					</div>
				</div>
				<div class="mui-slider-group">
					<div id="item1mobile" class="mui-slider-item mui-control-content mui-active">
						<div id="scroll1" class="mui-scroll-wrapper">
							<div class="mui-scroll mui-scroll-con">
								<img src="../images/muwu.jpg" / class="img">
								<ul class="mui-table-view">
									<li class="mui-table-view-cell">
										<a href="pullrefresh_with_tab2.html" class="links">
											<img class="mui-media-object mui-pull-left product_img" src="../images/shuijiao.jpg">
											<div class="mui-media-body">
												<h4 class="mui-ellipsis">成长无忧少儿综合意外险</h2>
												<p class="mui-ellipsis">能和心爱的人一起睡觉，是件幸福的事情；可是，打呼噜怎么办？</p>
												<p class="mui-ellipsis ">
													<span class="mui-pull-left">众安保险</span>
													<span class="mui-pull-right"><span class="">￥33.00</span>起/年</span>
												</p>
											</div>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div id="item2mobile" class="mui-slider-item mui-control-content">
						<div class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<img src="../images/cbd.jpg" / class="img">
								<ul class="mui-table-view">
								</ul>
							</div>
						</div>
					</div>
					<div id="item3mobile" class="mui-slider-item mui-control-content">
						<div class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<img src="../images/shuijiao.jpg" / class="img">
								<ul class="mui-table-view">
									<li class="mui-table-view-cell">
										第3个选项卡子项-1
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div id="item4mobile" class="mui-slider-item mui-control-content">
						<div class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<img src="../images/yuantiao.jpg" / class="img">
								<ul class="mui-table-view">
									<li class="mui-table-view-cell">
										第4个选项卡子项-1
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div id="item5mobile" class="mui-slider-item mui-control-content"> 
						<div class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view">
									<li class="mui-table-view-cell">
										第5个选项卡子项-1
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-2
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-3
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-4
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-5
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-6
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-7
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-8
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-9
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-10
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-11
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-12
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-13
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-14
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-15
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-16
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-17
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-18
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-19
									</li>
									<li class="mui-table-view-cell">
										第5个选项卡子项-20
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div id="item6mobile" class="mui-slider-item mui-control-content">
						<div class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view">
									<li class="mui-table-view-cell">
										第6个选项卡子项-1
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-2
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-3
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-4
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-5
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-6
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-7
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-8
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-9
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-10
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-11
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-12
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-13
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-14
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-15
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-16
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-17
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-18
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-19
									</li>
									<li class="mui-table-view-cell">
										第6个选项卡子项-20
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="../js/mui.min.js"></script>
		<script src="../js/commonlinks.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/mui.pullToRefresh.js"></script>
		<script src="../js/mui.pullToRefresh.material.js"></script>
		<script>
			mui.init();
			(function($) {
				
				
				
				
				//阻尼系数
				var deceleration = mui.os.ios?0.003:0.0009;
				$('.mui-scroll-wrapper').scroll({
					bounce: false,
					indicators: true, //是否显示滚动条
					deceleration:deceleration
				});
				$.ready(function() {
					//循环初始化所有下拉刷新，上拉加载。
					$.each(document.querySelectorAll('.mui-slider-group .mui-scroll'), function(index, pullRefreshEl) {
						$(pullRefreshEl).pullToRefresh({
							down: {
								callback: function() {
									var self = this;
									setTimeout(function() {
										var ul = self.element.querySelector('.mui-table-view');
										ul.insertBefore(createFragment(ul, index, 3, true), ul.firstChild);
										self.endPullDownToRefresh();
									}, 1000);
								}
							}
						});
					});
					var createFragment = function(ul, index, count, reverse,currentUrl) {
						
						var length = ul.querySelectorAll('li').length;	//获取当前类目下的产品数量
						var fragment = document.createDocumentFragment();	//创建DOM碎片
						var li,a,imgs,divs,h4,p1,p2,span1,span2,span3,textNode,textNode1;
						
						if(currentUrl){
							mui.ajax(currentUrl,{
							data: {
								listId: '',
								counts: count,
								lengths	:length
								
							},
							dataType: 'json', //服务器返回json格式数据
							type: 'post', //HTTP请求类型
							success: function(data) {
								//获得服务器响应
								console.log(data.userName)
							},
							error: function(e) {
				
								alert('链接失败' + e)
							}
						})
						}
						
						
						
						
						
						for (var i = 0; i < count; i++) {
							li = document.createElement('li');
							li.className = 'mui-table-view-cell';
							a = document.createElement('a');
							a.className = 'links';
							a.href = 'pullrefresh_with_tab2.html';
							imgs = document.createElement('img');
							imgs.src = '../images/shuijiao.jpg';
							imgs.className = 'mui-media-object mui-pull-left product_img';
							divs = document.createElement('div');
							divs.className = 'mui-media-body';
							h4 = document.createElement('h4');
							h4.className = 'mui-ellipsis'
							h4.innerText = '成长无忧少儿综合意外险'
							p1 = document.createElement('p');
							p1.className = 'mui-ellipsis'
							p1.innerText = '能和心爱的人一起睡觉，是件幸福的事情；可是，打呼噜怎么办';
							p2 = document.createElement('p');
							p2.className = 'mui-ellipsis';
							span1 = document.createElement('span');
							span1.className = 'mui-pull-left'
							span1.innerText = '众安保险';
							span2 = document.createElement('span');
							span2.className = 'mui-pull-right'
							span3 = document.createElement('span');
							span3.innerText = '￥33.00';
							textNode = document.createTextNode('年');
							textNode1 = document.createTextNode( length + (reverse ? (count - i) : (i + 1) ) );
							span2.appendChild(span3);
							span2.appendChild(textNode);
							span2.appendChild(textNode1);
							p2.appendChild(span1);
							p2.appendChild(span2);
							divs.appendChild(h4);
							divs.appendChild(p1);
							divs.appendChild(p2);
							a.appendChild(imgs);
							a.appendChild(divs);
							li.appendChild(a)
							
							//li.innerHTML = '第' + (index + 1) + '个选项卡子项-' + (length + (reverse ? (count - i) : (i + 1)));
							fragment.appendChild(li);
						}
						//alert(length+count)
						return fragment;
					};
				});
				
			//主列表点击事件
			mui('nav,.mui-content').on('tap', '.links', function() {
				var options = {
						styles:{
							popGesture: "close"
						},
						extras:{}
					};
					commonLinks(this,options)
			});
			var btns = document.getElementById('item6')
//			mui(".mui-slider-group .mui-scroll").pullToRefresh()[0].pullDownLoading();
			
			})(mui);
			
			//动态切换到想要的tap栏下
			mui('#slider').slider().gotoItem(6)
		</script>
	</body>

</html>